<section class="relative py-20 overflow-hidden max-w-2xl mx-auto p-6" id="contact" aria-labelledby="contact-heading">
  <h2 id="contact-heading" class="section-title text-3xl">Get in Touch</h2>
  <p class="my-5">
    Have a project in mind or want to discuss potential opportunities? I'd love to hear from you!
  </p>

  <div class="max-w-2xl mx-auto p-6 contact-container">
    <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="w-full" aria-labelledby="contact-heading">
      <div class="mb-6">
        <div class="flex gap-6 w-full">
          <div class="w-1/2">
            <label for="name" class="block uppercase tracking-wide text-gray-300 text-xs font-bold mb-2" id="name-label">Name</label>
            <input type="text" id="name" formControlName="name" aria-labelledby="name-label"
              class="appearance-none block w-full bg-gray-800 text-white border border-gray-700 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-gray-700 focus:border-[#D3AC92] placeholder-gray-400" aria-required="true" aria-describedby="name-error">
            <div *ngIf="isSubmitted() && formControls['name'].errors" id="name-error" class="mt-1">
              <p class="text-red-500 text-xs italic" *ngIf="formControls['name'].errors?.['required']">Name is required</p>
              <p class="text-red-500 text-xs italic" *ngIf="formControls['name'].errors?.['minlength']">Name must be at least 2 characters</p>
            </div>
          </div>
          <div class="w-1/2">
            <label for="email" class="block uppercase tracking-wide text-gray-300 text-xs font-bold mb-2" id="email-label">Email</label>
            <input type="email" id="email" formControlName="email" aria-labelledby="email-label"
              class="appearance-none block w-full bg-gray-800 text-white border border-gray-700 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-gray-700 focus:border-[#D3AC92] placeholder-gray-400" aria-required="true" aria-describedby="email-error">
            <div *ngIf="isSubmitted() && formControls['email'].errors" id="email-error" class="mt-1">
              <p class="text-red-500 text-xs italic" *ngIf="formControls['email'].errors?.['required']">Email is required</p>
              <p class="text-red-500 text-xs italic" *ngIf="formControls['email'].errors?.['email']">Please enter a valid email address</p>
            </div>
          </div>
        </div>
      </div>
      <div class="mb-6">
        <label for="subject" class="block uppercase tracking-wide text-gray-300 text-xs font-bold mb-2" id="subject-label">Subject</label>
        <input type="text" id="subject" formControlName="subject" aria-labelledby="subject-label"
          class="appearance-none block w-full bg-gray-800 text-white border border-gray-700 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-gray-700 focus:border-[#D3AC92] placeholder-gray-400" aria-required="true" aria-describedby="subject-error">
        <div *ngIf="isSubmitted() && formControls['subject'].errors" id="subject-error" class="mt-1">
          <p class="text-red-500 text-xs italic" *ngIf="formControls['subject'].errors?.['required']">Subject is required</p>
          <p class="text-red-500 text-xs italic" *ngIf="formControls['subject'].errors?.['minlength']">Subject must be at least 3 characters</p>
        </div>
      </div>
      <div class="mb-10">
        <label for="message" class="block uppercase tracking-wide text-gray-300 text-xs font-bold mb-2" id="message-label">Message</label>
        <textarea id="message" formControlName="message" rows="4" aria-labelledby="message-label"
          class="appearance-none block w-full bg-gray-800 text-white border border-gray-700 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-gray-700 focus:border-[#D3AC92] placeholder-gray-400" aria-required="true" aria-describedby="message-error"></textarea>
        <div *ngIf="isSubmitted() && formControls['message'].errors" id="message-error" class="mt-1">
          <p class="text-red-500 text-xs italic" *ngIf="formControls['message'].errors?.['required']">Message is required</p>
          <p class="text-red-500 text-xs italic" *ngIf="formControls['message'].errors?.['minlength']">Message must be at least 10 characters</p>
        </div>
      </div>
      <div class="mb-6 flex justify-end">
        <button type="submit"
          class="bg-[#D3AC92] hover:bg-[#c19b81] text-[#0C2A42] font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline flex items-center"
          [disabled]="isLoading()" [attr.aria-busy]="isLoading()">
          <span *ngIf="isLoading()" class="inline-block mr-2" aria-hidden="true">
            <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-[#0C2A42]" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
          </span>
          {{ isLoading() ? 'Sending...' : 'Send Message' }}
        </button>
      </div>
      
      <div *ngIf="submitSuccess()" role="alert" aria-live="assertive" class="mt-4 p-4 bg-green-800 text-green-100 rounded-md flex justify-between items-center">
        <span>Thank you! Your message has been sent successfully.</span>
        <button type="button" (click)="closeSuccessMessage()" class="text-green-100 hover:text-white focus:outline-none" aria-label="Close success message">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
          </svg>
        </button>
      </div>
      
      <div *ngIf="errorMessage()" role="alert" aria-live="assertive" class="mt-4 p-4 bg-red-800 text-red-100 rounded-md flex justify-between items-center">
        <span>{{ errorMessage() }}</span>
        <button type="button" (click)="closeErrorMessage()" class="text-red-100 hover:text-white focus:outline-none" aria-label="Close error message">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
          </svg>
        </button>
      </div>
    </form>
  </div>
</section>
