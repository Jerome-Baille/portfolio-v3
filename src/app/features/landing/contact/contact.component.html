<section class="relative py-20 overflow-hidden max-w-2xl mx-auto p-6" id="contact" aria-labelledby="contact-heading">
  <h2 id="contact-heading" class="section-title text-3xl">Get in Touch</h2>
  <p class="my-5">
    Have a project in mind or want to discuss potential opportunities? I'd love to hear from you!
  </p>

  <div class="max-w-2xl mx-auto p-6 contact-container">
    <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="w-full" aria-labelledby="contact-heading">
      <div class="mb-6">
        <div class="flex gap-6 w-full">
          <div class="w-1/2">
            <label for="name" class="block uppercase tracking-wide text-gray-300 text-xs font-bold mb-2" id="name-label">Name</label>
            <input type="text" id="name" formControlName="name" aria-labelledby="name-label" autocomplete="name"
              class="appearance-none block w-full bg-gray-800 text-white border border-gray-700 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-gray-700 focus:border-[#D3AC92] placeholder-gray-400" aria-required="true" aria-describedby="name-error">
              @if (isSubmitted() && formControls['name'].errors) {
                <div id="name-error" class="mt-1">
                  @if (formControls['name'].errors['required']) {
                    <p class="text-red-500 text-xs italic">Name is required</p>
                  }
                  @if (formControls['name'].errors['minlength']) {
                    <p class="text-red-500 text-xs italic">Name must be at least 2 characters</p>
                  }
                </div>
              }
            </div>
            <div class="w-1/2">
              <label for="email" class="block uppercase tracking-wide text-gray-300 text-xs font-bold mb-2" id="email-label">Email</label>
              <input type="email" id="email" formControlName="email" aria-labelledby="email-label" autocomplete="email"
                class="appearance-none block w-full bg-gray-800 text-white border border-gray-700 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-gray-700 focus:border-[#D3AC92] placeholder-gray-400" aria-required="true" aria-describedby="email-error">
                @if (isSubmitted() && formControls['email'].errors) {
                  <div id="email-error" class="mt-1">
                    @if (formControls['email'].errors['required']) {
                      <p class="text-red-500 text-xs italic">Email is required</p>
                    }
                    @if (formControls['email'].errors['email']) {
                      <p class="text-red-500 text-xs italic">Please enter a valid email address</p>
                    }
                  </div>
                }
              </div>
            </div>
          </div>
          <div class="mb-6">
            <label for="subject" class="block uppercase tracking-wide text-gray-300 text-xs font-bold mb-2" id="subject-label">Subject</label>
            <input type="text" id="subject" formControlName="subject" aria-labelledby="subject-label" autocomplete="on"
              class="appearance-none block w-full bg-gray-800 text-white border border-gray-700 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-gray-700 focus:border-[#D3AC92] placeholder-gray-400" aria-required="true" aria-describedby="subject-error">
              @if (isSubmitted() && formControls['subject'].errors) {
                <div id="subject-error" class="mt-1">
                  @if (formControls['subject'].errors['required']) {
                    <p class="text-red-500 text-xs italic">Subject is required</p>
                  }
                  @if (formControls['subject'].errors['minlength']) {
                    <p class="text-red-500 text-xs italic">Subject must be at least 3 characters</p>
                  }
                </div>
              }
            </div>
            <div class="mb-10">
              <label for="message" class="block uppercase tracking-wide text-gray-300 text-xs font-bold mb-2" id="message-label">Message</label>
              <textarea id="message" formControlName="message" rows="4" aria-labelledby="message-label" autocomplete="on"
              class="appearance-none block w-full bg-gray-800 text-white border border-gray-700 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-gray-700 focus:border-[#D3AC92] placeholder-gray-400" aria-required="true" aria-describedby="message-error"></textarea>
              @if (isSubmitted() && formControls['message'].errors) {
                <div id="message-error" class="mt-1">
                  @if (formControls['message'].errors['required']) {
                    <p class="text-red-500 text-xs italic">Message is required</p>
                  }
                  @if (formControls['message'].errors['minlength']) {
                    <p class="text-red-500 text-xs italic">Message must be at least 10 characters</p>
                  }
                </div>
              }
            </div>
            <div class="mb-6 flex justify-end">
              <button type="submit"
                class="bg-[#D3AC92] hover:bg-[#c19b81] text-[#0C2A42] font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline flex items-center"
                [disabled]="isLoading()" [attr.aria-busy]="isLoading()">
                @if (isLoading()) {
                  <span class="inline-block mr-2" aria-hidden="true">
                    <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-[#0C2A42]" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                  </span>
                }
                {{ isLoading() ? 'Sending...' : 'Send Message' }}
              </button>
            </div>

            @if (submitSuccess()) {
              <div role="alert" aria-live="assertive" class="mt-4 p-4 bg-green-800 text-green-100 rounded-md flex justify-between items-center">
                <span>Thank you! Your message has been sent successfully.</span>
                <button type="button" (click)="closeSuccessMessage()" class="text-green-100 hover:text-white focus:outline-none" aria-label="Close success message">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                  </svg>
                </button>
              </div>
            }

            @if (errorMessage()) {
              <div role="alert" aria-live="assertive" class="mt-4 p-4 bg-red-800 text-red-100 rounded-md flex justify-between items-center">
                <span>{{ errorMessage() }}</span>
                <button type="button" (click)="closeErrorMessage()" class="text-red-100 hover:text-white focus:outline-none" aria-label="Close error message">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                  </svg>
                </button>
              </div>
            }
          </form>
        </div>
      </section>
